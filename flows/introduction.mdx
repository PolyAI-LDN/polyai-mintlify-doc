---
title: 'Introduction'
description: 'An overview of how flows and prompting work inside the PolyAI agent runtime.'
---

This documentation explains how to build and maintain conversational flows in the PolyAI runtime, using a combination of:

- Deterministic logic via functions and state
- Language generation via LLM prompting
- Flow structure and step transitions

A flow is a structured interaction made up of **steps**, each containing a prompt and one or more actions. You use flows when an interaction requires:

- Data collection (e.g. phone number, address, name)
- Validation or retries
- External API calls
- Routing, handoff, or escalation
- Enforcement of business logic or process compliance

## When to use a flow vs. knowledge base

- Use the **Knowledge Base** for short, simple questions (1–3 turn answers).
- Use a **Flow** when:
  - The conversation needs to follow a specific structure
  - You want to guide or constrain the LLM
  - You need to call functions, collect multiple fields, or hand off to an agent

## Prompt visibility and scope

Each **step acts as its own context window** for the LLM. The LLM only sees:

- The current step’s prompt
- The function names and descriptions listed in that step

The LLM **does not see**:
- Previous steps
- Flow names
- Flow descriptions
- Comments or implementation details outside the current prompt

As a result, your prompts must be written **as if they are self-contained instructions**.

## Prompting philosophy

This runtime uses a **few-shot prompting (FSP)** strategy where applicable. This means you can:

- Include short example exchanges within a step to guide the model
- Embed function names and descriptions in plain language
- Use explicit phrasing to encourage function calling, e.g.
      "Call `check_availability` now before responding to the user."

## Designing flows

- Design flows as **state machines** — each step should represent a single state of the interaction.
- Move between steps using `flow.goto_step()`, always followed by `return`.
- Use transition functions to determine logic for branching, validation, and navigation.

    if not user_email:
        flow.goto_step("Collect email")
        return

- Avoid ambiguous prompts or future-looking function names. For example, prefer `check_availability` over `make_successful_booking`.

## Resources

- [Flow object reference](./object)
- [Prompting tips](./prompting)
- [Function definition and syntax](./functions)