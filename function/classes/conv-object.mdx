---
title: "Conversation"
description: "The Conversation object, its attributes, and methods."
---

The `Conversation` object (`conv`) provides access to conversation data and tools for managing the agent's behavior. It handles state management, flow transitions, SMS interactions, environment details, and voice selection.

## Attributes

The `conv` object includes the following attributes:

<AccordionGroup>
  <Accordion title="id">
    **Description**: Unique identifier of the conversation.

    **Example**:
    ```python
    print(f"Conversation ID: {conv.id}")
    ```
  </Accordion>

  <Accordion title="account_id">
    **Description**: The account ID associated with the conversation.
  </Accordion>

  <Accordion title="project_id">
    **Description**: The project ID of the current agent.
  </Accordion>

  <Accordion title="env">
    **Description**: Identifies the current [environment](/environments-and-versions/introduction) where the agent is running.

    **Values**:
    - `"sandbox"`: For testing new features.
    - `"pre-release"`: For staging and quality assurance.
    - `"live"`: For production environments.

    **Example**:
    ```python
    if conv.env == "live":
        print("Agent is live!")
    ```
  </Accordion>

  <Accordion title="integration_attributes">
    **Description**: A dictionary of metadata from integration platforms. Available only in the start function.
  </Accordion>

  <Accordion title="sip_headers">
    **Description**: A dictionary of [SIP headers](https://datatracker.ietf.org/doc/html/rfc7131) with metadata about the caller.

    **Example**:
    ```python
    caller_id = conv.sip_headers.get("From", "Unknown Caller")
    print("Caller ID:", caller_id)
    ```
  </Accordion>

  <Accordion title="caller_number">
    **Description**: The caller's phone number.

    **Example**:
    ```python
    response = requests.get(f"https://api.example.com/users?number={conv.caller_number}")
    user = response.json()
    conv.state.user = user
    ```
  </Accordion>

  <Accordion title="callee_number">
    **Description**: The number the caller dialed.

    **Example**:
    ```python
    if conv.callee_number == "+15551234567":
        conv.state.branch = "Main Branch"
    else:
        conv.state.branch = "Other Branch"
    ```
  </Accordion>

  <Accordion title="current_flow">
    **Description**: The name of the current flow, if any.
  </Accordion>

  <Accordion title="state">
    **Description**: A dictionary-like object for storing variables during the conversation. Use it to maintain context across function calls. See the [variable feature page](../variables) for details.

    **Example**:
    ```python
    conv.state.num_calls = 1
    conv.state.responses = {
        1: "This is your first call.",
        2: "This is your second call."
    }

    num_calls = conv.state.num_calls
    conv.state.num_calls += 1
    return conv.state.responses[num_calls]
    ```
  </Accordion>

  <Accordion title="sms_queue">
    **Description**: List of SMS messages queued to be sent.
  </Accordion>

  <Accordion title="metrics_queue">
    **Description**: List of metrics queued to be logged.
  </Accordion>

  <Accordion title="variant_name">
    **Description**: The name of the current variant used in this conversation, if any.
  </Accordion>

  <Accordion title="variants">
    **Description**: Dictionary of all variants available in the conversation.
  </Accordion>

  <Accordion title="variant">
    **Description**: Returns the full object of the current variant in use.
  </Accordion>

  <Accordion title="sms_templates">
    **Description**: A dictionary containing SMS templates, accessible by template ID.

    **Example**:
    ```python
    conv.state.sms_content = conv.sms_templates[conv.state.sms_template_id].content
    ```
  </Accordion>

  <Accordion title="voice_change">
    **Description**: The current request to change voice.
  </Accordion>

  <Accordion title="language">
    **Description**: ISO 639 language code for the project.
  </Accordion>

  <Accordion title="history">
    **Description**: Full chronological history of the conversation.
  </Accordion>

  <Accordion title="handoffs">
    **Description**: Dictionary of handoff destinations available for this conversation.
  </Accordion>

  <Accordion title="transcript_alternatives">
    **Description**: List of alternate transcriptions for the most recent user utterance.
  </Accordion>
</AccordionGroup>

## Methods

<AccordionGroup>
  <Accordion title="set_voice">
    **Description**: Set a new voice to be used moving forward.
  </Accordion>

  <Accordion title="say">
    **Description**: Sets the utterance to say after the function finishes.
  </Accordion>

  <Accordion title="randomize_voice">
    **Description**: Assigns a voice to the agent based on predefined weights. [Details](/voice/multi-voice)

    **Example**:
    ```python
    conv.randomize_voice([...])
    ```
  </Accordion>

  <Accordion title="goto_flow">
    **Description**: Transitions the agent to another flow.

    **Example**:
    ```python
    conv.goto_flow("support_flow")
    ```
  </Accordion>

  <Accordion title="exit_flow">
    **Description**: Exits the current flow and resumes default agent behavior.
  </Accordion>

  <Accordion title="set_variant">
    **Description**: Manually sets the variant for this conversation.
  </Accordion>

  <Accordion title="log_api_response">
    **Description**: Log an API response for analytics and diagnostics.
  </Accordion>

  <Accordion title="send_sms">
    **Description**: Sends a direct SMS.

    **Example**:
    ```python
    conv.send_sms(to_number, from_number, "Hello!")
    ```
  </Accordion>

  <Accordion title="send_sms_template">
    **Description**: Sends a pre-configured SMS template.
  </Accordion>

  <Accordion title="write_metric">
    **Description**: Sends a custom metric to the analytics pipeline.
  </Accordion>

  <Accordion title="call_handoff">
    **Description**: Initiates a call handoff to a predefined destination.

    **Example**:
    ```python
    conv.call_handoff("Billing", reason="Billing request", utterance="Let me transfer you.")
    ```
  </Accordion>
</AccordionGroup>
